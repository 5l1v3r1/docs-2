div do
note <<-MARKDOWN
  MARKDOWN
  end

step "install a compiler (Xcode or GCC)" do
  note <<-MARKDOWN

**Special note for folks who upgraded from Leopard to Snow Leopard:** The SQLite gem does not compile with an older version of Xcode installed. If you upgraded your machine from an older version of OS X, and you have an older Xcode, you still need to reinstall it from your **Snow Leopard** DVD. The steps below should work fine to upgrade it.
  MARKDOWN

  link "install_a_compiler"

end

step "Install Git, Ruby, Rails, and Gems" do

  link "snow_leopard_bootstrap"

end

step "Install SQLite Manager" do
  link "install_sqlite_manager"
end

step "Install KomodoEdit" do
  link "install_komodo_edit_for_mac"
end


step "Verify successful installation " do
  note "In this step, we make sure the installation script actually installed everything correctly."

  verify "git" do
    console "which git"
    result "/usr/local/bin/git"
    console "git --version"
    result "git version 1.7.4.4"
  end

  verify "ruby" do
    console "which ruby"
    result "/usr/local/bin/ruby"
    console "ruby -v"
    result "ruby 1.9.2"
  end

  verify "rails" do
    console "which rails"
    result "/usr/local/bin/rails"
    console "rails -v"
    result "3.0 (or something???)"
  end

  verify "gems" do

    console "gem list --local"

    result <<-PRE
    *** LOCAL GEMS ***

    actionmailer (2.3.9)
    actionpack (2.3.9)
    activerecord (2.3.9)
    activeresource (2.3.9)
    activesupport (2.3.9)
    builder (2.1.2)
    configuration (1.1.0)
    cucumber (0.6.2)
    cucumber-rails (0.2.4)
    diff-lcs (1.1.2)
    gherkin (1.0.30)
    heroku (1.8.0)
    json (1.2.0) or json_pure (1.4.3)
    launchy (0.3.5)
    nokogiri (1.4.1)
    polyglot (0.3.0) (optional)
    rack (1.1.0)
    rails (2.3.5)
    rake (0.8.7)
    rest-client (1.3.1)
    rspec (1.3.0)
    rspec-rails (1.3.2)
    sqlite3-ruby (1.2.5)
    term-ansicolor (1.0.4)
    treetop (1.4.3) (optional)
    webrat (0.7.0)
    PRE
  end
end

next_step "create_a_test_application" do

  note <<-MARKDOWN
**Finally**, make sure you can do everything in the Windows install directions. Wherever it says "git bash", you can mentally substitute "Terminal" - git bash is the name for the Terminal-equivalent program on Windows. I know, strange name!
  MARKDOWN
end

step "Congratulations!" do
  note "You have everything you need to write a Ruby on Rails application."
end

step "Clean Up" do
  note <<-MARKDOWN
  You won't be using the test application in the workshop; we just created it to make sure everything was working. You should delete it now to reduce confusion during the workshop. Don't worry about losing information - you'll repeat all the steps tomorrow, but more slowly so you can better understand what's going on under the hood.
MARKDOWN

  step "Trash the test_app folder" do
    note "Drag the test_app folder (inside ruby_on_rails) to the trash. Leave ruby_on_rails on the desktop."
  end

  step "Destroy the heroku app" do

    note "Go to <https://heroku.com/myapps> and then click on your app name. Scroll to the bottom of the page and click Destroy App."
  end

end
