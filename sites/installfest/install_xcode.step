note "Installing XCode is straightforward with one caveat. When it asks you about the components to install you need to make sure \"Unix Tools\" is selected. Other than that just click Continue/Okay/Yes/etc."

note <<-MARKDOWN

**Special note for folks who upgraded from Leopard to Snow Leopard:** The SQLite gem does not compile with an older version of XCode installed. If you upgraded your machine from an older version of OS X, and you have an older XCode, you still need to reinstall it from your **Snow Leopard** DVD. The steps below should work fine to upgrade it.
  MARKDOWN

choice "installing from a drive or from the App Store" do

  option "install XCode from a thumb drive or DVD" do

    step "insert your OS X DVD or Thumb Drive"

    step "Locate Xcode.mpkg" do
      note "on the OS X DVD, it is inside the \"Optional Installs\" folder."
    end

    step 'Double-click Xcode.mkpg' do
      note 'This will bring up a window titled *"Install XCode."*'
    end
    
    step "Keep on clicking..." do
      li 'Click "Continue" at the Introduction screen.'
      li 'Click "Continue" at the License screen.'
      li 'Click "Agree" in the popup to agree to the license.'
      li 'Click "Continue" at the Destination Select screen.'
      li "Click \"Continue\" at the Installation Type screen. (Don't change the checkboxes.)"
   end

    step 'Click "Install".' do
      note "Enter your user password in the popup to REALLY start installing. It takes a while."
    end

    step 'Click "Close"' do
      note 'once you get "The installation was successful" on the Summary screen.'
    end

  end

  option "Install XCode from the Apple App Store" do
    step "Open the App Store application"
    step "Install XCode" do
      note "Search for 'XCode' and click the 'Install' button"
      note "![XCode in the App Store](appstore.jpg)"
    end
    step "Launch XCode"
    step "Install the Command Line Tools" do
      note "Open the Preferences menu and select the Downloads tab."
      note "Then click the 'Install' button next to 'Command Line Tools'."
      note "![XCode Preferences](xcode-prefs.jpg)"
    end
  end

end

verify "your compiler was installed" do
  console "gcc --version"
  result "i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)"
end

